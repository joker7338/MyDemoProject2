CREATE PROC [dbo].[usp_SaveJob]

(

	@STR_JOBTITLE NVARCHAR(100),

	@STR_JOBDESC NVARCHAR(MAX),

	@DT_JOBPOSTEDDATE DATETIME,

	@STR_QUALIFICATION NVARCHAR(300),

	@STR_APPLYLINK VARCHAR(500),
	@Comments nvarchar(max)='',
	@STR_LOCATION VARCHAR(500),
	@i_intJOBNO INT,
	 @JOBNUMBER INT OUTPUT
)

AS

	BEGIN

		

			if not exists (select JOBTITLE from JOB  where JOBNO =@i_intJOBNO)
			BEGIN
					INSERT INTO JOB(JOBTITLE,JOBDESC,POSTEDDATE,QUALIFICATION,APPLYLINK,Location,Comments,IsDeleted) VALUES (@STR_JOBTITLE,@STR_JOBDESC,@DT_JOBPOSTEDDATE,@STR_QUALIFICATION,@STR_APPLYLINK,@STR_LOCATION,@Comments,0)


					SET @JOBNUMBER= SCOPE_IDENTITY();

			
			END
			ELSE

			BEGIN
								UPDATE JOB SET JOBTITLE=@STR_JOBTITLE,JOBDESC=@STR_JOBDESC,POSTEDDATE=@DT_JOBPOSTEDDATE,QUALIFICATION=@STR_QUALIFICATION, APPLYLINK=@STR_APPLYLINK,Location=@STR_LOCATION,Comments=@Comments WHERE JOBNO = @i_intJOBNO
								SET @JOBNUMBER=@i_intJOBNO

								

			END

			SELECT @JOBNUMBER
		

		

	END





